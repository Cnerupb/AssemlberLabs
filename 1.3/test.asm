format PE console
entry start

include 'win32ax.inc'

format PE console
entry start

section '.data' data readable writeable
    ; ???????? ??????:
    source dd 1, 2, 3, 4, 5
    ; ??????? ?????? (??? ?? ??????):
    destination dd 5 dup(0)
    ; ?????? ???????:
    arraySize dd 5

section '.code' code readable executable
start:
    ; ?????????? ESI ? ?????? source
    mov esi, source
    ; ?????????? EDI ? ?????? destination
    mov edi, destination
    ; ?????????? ECX ??? ?????? ???????
    mov ecx, [arraySize]

copy_loop:
    ; ???????? ?? ???? ? ECX ??? ??????????
    test ecx, ecx
    jz done

    ; ??????????? ??????? ?? source ? destination
    lodsd               ; ????????? ????? ? EAX ? ??????????? ESI
    stosd               ; ?????????? ????? ?? EAX ? destination ? ??????????? EDI

    ; ????????? ??????? ECX
    loop copy_loop

done:
    ; ?????????? 0, ????????? ??????????????? ????? ? ????? ExitProcess
    mov eax, 0
    ret

;=======================================================
section '.idata' import data readable
;=======================================================
 
        library msvcrt,'MSVCRT.DLL',\
                kernel32,'KERNEL32.DLL'
 
        import kernel32,\
            ExitProcess, 'ExitProcess',\
               sleep,'Sleep'
 
        import msvcrt,\
               gets,'gets',\
               printf,'printf', \
               getch, '_getch'